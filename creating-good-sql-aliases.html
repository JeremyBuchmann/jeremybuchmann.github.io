<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Creating Good SQL Aliases - Jeremy Buchmann</title>
    <meta name="author" content="Jeremy Buchmann">


  <meta name="description" content="I was reviewing someone else's code the other day and noticed something that has been bugging me ever since I learned SQL (a good 10+ years ago): bad SQL aliases. Let me start with some non-SQL code as an example. int a, b; string c; If you saw this in …">

	<meta name="twitter:card" content="summary">
	  <meta name="twitter:creator" content="@jeremybuchmann">
	<meta name="twitter:title" content="Creating Good SQL Aliases">
	<meta name="twitter:description" content="I was reviewing someone else's code the other day and noticed something that has been bugging me ever since I learned SQL (a good 10+ years ago): bad SQL aliases. Let me start with some non-SQL code as an example. int a, b; string c; If you saw this in …">
	<meta name="twitter:url" content="http://jeremybuchmann.com/creating-good-sql-aliases.html">


    <link rel="stylesheet" href="http://jeremybuchmann.com/theme/css/main.css" type="text/css" />



    <link href="http://jeremybuchmann.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jeremy Buchmann Atom Feed" />
</head>

<body>

    <div class="container">

      <header>
        <div class="feeds">
          <a href="http://jeremybuchmann.com/feeds/all.atom.xml" rel="alternate"><img src="http://jeremybuchmann.com/theme/images/icons/feed-32px.png" alt="atom feed"/></a>
        </div>
          <nav class="pages">
              <a href="http://jeremybuchmann.com/pages/about-me.html">About Me</a>
-              <a href="http://jeremybuchmann.com/pages/curriculum-vitae.html">Curriculum Vitae</a>
          </nav>
    <a href="http://jeremybuchmann.com" class="title">Jeremy Buchmann</a>
      </header>

      <div class="wrapper">

      <div role="main" class="content">
	<article class="full">
		
		<h1>Creating Good SQL Aliases</h1>
		
<div class="metadata">
  <time datetime="2012-06-16T21:15:00+02:00">Jun 16, 2012</time>
    <address class="vcard author">
      by <a class="url fn" href="http://jeremybuchmann.com/author/jeremy-buchmann.html">Jeremy Buchmann</a>
    </address>
  in <a href="http://jeremybuchmann.com/category/development.html">development</a>
</div>		
		<p>I was reviewing someone else's code the other day and noticed something
that has been bugging me ever since I learned SQL (a good 10+ years
ago): bad SQL aliases.  Let me start with some non-SQL code as an
example.</p>
<div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
<span class="n">string</span> <span class="k">c</span><span class="p">;</span>
</pre></div>


<p>If you saw this in a real-life program, you'd think that whoever wrote
it was either exceptionally lazy or didn't know what they were doing. In
this day and age, you expect good variable names, even if they're a bit
long.</p>
<div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">numEmployees</span><span class="p">,</span> <span class="n">selectedEmployeeId</span><span class="p">;</span>
<span class="n">string</span> <span class="n">companyName</span><span class="p">;</span>
</pre></div>


<p>Obviously, that's much better. So why do I keep seeing SQL queries that
look like this:</p>
<div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">action</span><span class="p">,</span>
       <span class="n">a</span><span class="p">.</span><span class="n">tstamp</span><span class="p">,</span>
       <span class="n">b</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span>
       <span class="n">b</span><span class="p">.</span><span class="n">lname</span><span class="p">,</span>
       <span class="k">c</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span>
       <span class="k">c</span><span class="p">.</span><span class="n">lname</span><span class="p">,</span>
       <span class="n">d</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span>
       <span class="n">d</span><span class="p">.</span><span class="n">lname</span>
<span class="k">FROM</span> <span class="n">personnel_log</span> <span class="n">a</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">users</span> <span class="n">b</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">target_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">id</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">users</span> <span class="k">c</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">modifier_id</span> <span class="o">=</span> <span class="k">c</span><span class="p">.</span><span class="n">id</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">users</span> <span class="n">d</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">approver_id</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span>
<span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">tstamp</span> <span class="o">&gt;</span> <span class="s1">&#39;2012-06-16 00:00:00 UTC&#39;</span><span class="p">::</span><span class="k">TIMESTAMP</span> <span class="k">WITH</span> <span class="n">TIME</span> <span class="k">ZONE</span>
  <span class="k">AND</span> <span class="k">c</span><span class="p">.</span><span class="n">lname</span> <span class="k">ILIKE</span> <span class="s1">&#39;%smith%&#39;</span>
  <span class="k">AND</span> <span class="n">b</span><span class="p">.</span><span class="n">fname</span> <span class="k">ILIKE</span> <span class="s1">&#39;%James%&#39;</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">d</span><span class="p">.</span><span class="n">lname</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">tstamp</span>
</pre></div>


<p>If you're trying to figure out the meaning of the expressions in the
SELECT list or the WHERE clauses, you have to keep referring to the JOIN
sections to translate the a, b, c, and d aliases into their actual table
names. In small-ish queries such as this one, it's not a huge deal, but
when the queries start getting up to 50 or 100 lines, it becomes a real
chore to track down each letter alias. Now look at the same query with
just a few more keystrokes:</p>
<div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">plog</span><span class="p">.</span><span class="n">action</span><span class="p">,</span>
       <span class="n">plog</span><span class="p">.</span><span class="n">tstamp</span><span class="p">,</span>
       <span class="n">employee</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span>
       <span class="n">employee</span><span class="p">.</span><span class="n">lname</span><span class="p">,</span>
       <span class="n">modder</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span>
       <span class="n">modder</span><span class="p">.</span><span class="n">lname</span><span class="p">,</span>
       <span class="n">approver</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span>
       <span class="n">approver</span><span class="p">.</span><span class="n">lname</span>
<span class="k">FROM</span> <span class="n">personnel_log</span> <span class="n">plog</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">users</span> <span class="n">employee</span> <span class="k">ON</span> <span class="n">plog</span><span class="p">.</span><span class="n">target_id</span> <span class="o">=</span> <span class="n">employee</span><span class="p">.</span><span class="n">id</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">users</span> <span class="n">modder</span> <span class="k">ON</span> <span class="n">plog</span><span class="p">.</span><span class="n">modifier_id</span> <span class="o">=</span> <span class="n">modder</span><span class="p">.</span><span class="n">id</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">users</span> <span class="n">approver</span> <span class="k">ON</span> <span class="n">plog</span><span class="p">.</span><span class="n">approver_id</span> <span class="o">=</span> <span class="n">approver</span><span class="p">.</span><span class="n">id</span>
<span class="k">WHERE</span> <span class="n">plog</span><span class="p">.</span><span class="n">tstamp</span> <span class="o">&gt;</span> <span class="s1">&#39;2012-06-16 00:00:00 UTC&#39;</span><span class="p">::</span><span class="k">TIMESTAMP</span> <span class="k">WITH</span> <span class="n">TIME</span> <span class="k">ZONE</span>
  <span class="k">AND</span> <span class="n">modder</span><span class="p">.</span><span class="n">lname</span> <span class="k">ILIKE</span> <span class="s1">&#39;%smith%&#39;</span>
  <span class="k">AND</span> <span class="n">employee</span><span class="p">.</span><span class="n">fname</span> <span class="k">ILIKE</span> <span class="s1">&#39;%James%&#39;</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">approver</span><span class="p">.</span><span class="n">lname</span><span class="p">,</span> <span class="n">approver</span><span class="p">.</span><span class="n">fname</span><span class="p">,</span> <span class="n">plog</span><span class="p">.</span><span class="n">tstamp</span>
</pre></div>


<p>So much nicer! You know right away that the third SELECT expression is
the employee's first name and that the first ORDER clause is the
approver's last name.</p>
<p>An SQL alias is much like a variable name. The better the name, the
easier it is to figure out what the code is trying to do.</p>	

	</article>



      </div>

      <div class="sidebar">
        <div class="sidebar-container" >

                <aside>
                  <h2>About</h2>
          <p>
                    This is the website of Jeremy Buchmann, a Web developer in Eindhoven, Netherlands.
          </p>
        </aside>

  	          <nav>
                <h2>Categories</h2>
                <ul>
                    <li ><a href="http://jeremybuchmann.com/category/beer.html">beer</a></li>
                    <li class="active"><a href="http://jeremybuchmann.com/category/development.html">development</a></li>
                    <li ><a href="http://jeremybuchmann.com/category/misc.html">misc</a></li>
                </ul>
              </nav>

                <aside>
                <h2>Social</h2>
          <ul class="social">
        <li><a href="https://twitter.com/jeremybuchmann">Twitter</a><i></i></li>
        <li><a href="https://www.linkedin.com/in/jeremybuchmann">LinkedIn</a><i></i></li>
        <li><a href="https://github.com/JeremyBuchmann">Github</a><i></i></li>
          </ul>
        </aside>

                <aside>
                  <h2>Foundation</h2>
                  <ul>
                      <li><a href="https://www.eindhoven.nl/">Live</a></li>
                      <li><a href="https://laurawetherington.com">Love</a></li>
                      <li><a href="https://www.coosto.com">Work</a></li>
                  </ul>
                </aside>
            </div>
      </div>

      </div>

      <footer>
    <p role="contentinfo">
      Copyright &copy; Jeremy Buchmann 2012-2018
    </p>

      </footer>

    </div>
</body>
</html>